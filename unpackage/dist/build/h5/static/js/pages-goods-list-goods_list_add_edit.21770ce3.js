(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-list-goods_list_add_edit"],{"0221":function(e,t,a){"use strict";a.r(t);var s=a("58c3"),i=a("bc73");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);a("d271");var r=a("f0c5"),o=Object(r["a"])(i["default"],s["b"],s["c"],!1,null,"7e974220",null,!1,s["a"],void 0);t["default"]=o.exports},"0f91":function(e,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("a434"),a("d3b7"),a("159b"),a("14d9"),a("e9c4"),a("7db0"),a("4de4"),a("c975"),a("c740");var s={data:function(){return{switch_sku:!0,skus:[],goods:{},dynamicTags_spec:[],inputVisible_spec:!1,inputValue_spec:"",checked_spec:!0,spec_s:"规格",tableData:[],tableSkuData:[]}},watch:{checked_spec:function(e){for(var t=0;t<e.length;t++)for(var a=t+1;a<e.length;a++)e[t]==e[a]&&(e.splice(a,1),a--)}},methods:{submitData:function(e){var t=this;this.skus=[],this.tableSkuData.forEach((function(e){t.skus.push(e)})),"function"===typeof e&&e(this.skus,JSON.stringify({spec_s:this.spec_s,spec:this.dynamicTags_spec}))},getData:function(e){this.submitData(e)},setData:function(e){this.form=e.goods;var t=JSON.parse(this.form.skus);this.spec_s=t.spec_s,this.tableSkuData=e.goods_sku,this.dynamicTags_spec=t.spec,this.checked_spec=this.dynamicTags_spec.length>0},setGoods:function(e){this.goods=e},affirm:function(){var e=this;this.dynamicTags_spec.length>0&&(this.dynamicTags_spec.forEach((function(t,a){e.tableSkuData.find((function(e){return e.spec==t}))||e.tableSkuData.push({price:e.goods.price,stock_num:e.goods.stock_num,spec:t,spec_s:a})})),this.tableSkuData=this.tableSkuData.filter((function(t){return e.dynamicTags_spec.find((function(e){return e==t.spec}))})))},handleClose_spec:function(e){this.dynamicTags_spec.splice(this.dynamicTags_spec.indexOf(e),1),this.tableSkuData.splice(this.tableSkuData.findIndex((function(t){return t.spec==e})),1)},showInput_spec:function(){var e=this;this.inputVisible_spec=!0,this.$nextTick((function(){e.$refs.saveTagInput_spec.$refs.input.focus()}))},handleInputConfirm_spec:function(){var e=this;if(this.inputValue_spec){if(this.dynamicTags_spec.find((function(t){return t==e.inputValue_spec})))return void this.$message({message:this.inputValue_spec+"已存在",type:"warning"});this.dynamicTags_spec.push(this.inputValue_spec),this.affirm()}this.inputVisible_spec=!1,this.inputValue_spec=""},open_spec:function(){var e=this;this.checked_spec||this.$confirm("此操作将清除【".concat(this.spec_s,"】数据, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$message({type:"success",message:"清除成功!"}),e.dynamicTags_spec=[],e.tableSkuData=[]})).catch((function(){e.checked_spec=!0}))},open_switch_sku:function(){var e=this;this.switch_sku||this.$confirm("此操作将清除数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$message({type:"success",message:"清除成功!"}),e.dynamicTags_spec=[],e.tableData=[],e.tableSkuData=[]})).catch((function(){e.switch_sku=!0}))}}};t.default=s},1825:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return s}));var s={uniFilePicker:a("8ba3").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container add_edit"},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,"label-width":"150px"}},[a("div",[a("h3",{staticClass:"margin_b_20"},[e._v("分享")]),a("div",[a("el-form-item",{attrs:{label:"分享标题"}},[a("el-input",{model:{value:e.form.share_title,callback:function(t){e.$set(e.form,"share_title",t)},expression:"form.share_title"}}),a("div",{staticClass:"remark_txt"},[e._v("如果不填写，默认为商品名称")])],1),a("el-form-item",{attrs:{label:"分享图标"}},[a("uni-file-picker",{attrs:{fileMediatype:"image",returnType:"object","image-styles":e.imageStyle},on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.imgUpload.apply(void 0,arguments)}},model:{value:e.imageValue,callback:function(t){e.imageValue=t},expression:"imageValue"}}),a("div",{staticClass:"remark_txt"},[e._v("如果不选择，默认为商品缩略主图片")])],1),a("el-form-item",{attrs:{label:"分享描述"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3}},model:{value:e.form.share_desc,callback:function(t){e.$set(e.form,"share_desc",t)},expression:"form.share_desc"}}),a("div",{staticClass:"remark_txt"},[e._v("如果不填写，则默认为 推广词")])],1)],1)])])],1)},n=[]},"1cab":function(e,t,a){"use strict";var s=a("2d14"),i=a.n(s);i.a},22335:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return s}));var s={uniFilePicker:a("8ba3").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{"label-width":"150px"}},[a("div",{staticClass:"container"},[a("h3",{staticClass:"margin_b_20"},[e._v("主图")]),a("el-form-item",[a("uni-file-picker",{attrs:{fileMediatype:"image",returnType:"array","image-styles":e.imageStyle},on:{delete:function(t){arguments[0]=t=e.$handleEvent(t),e.imgDelete.apply(void 0,arguments)}},model:{value:e.imageValue,callback:function(t){e.imageValue=t},expression:"imageValue"}})],1)],1),a("div",{staticClass:" container"},[a("h3",{staticClass:"margin_b_20"},[e._v("商品详情")]),a("el-form-item",[a("div",{staticClass:"editor",attrs:{id:"wangeditor"}},[a("div",{ref:"editorElem"})])])],1)])],1)},n=[]},"2a06":function(e,t,a){var s=a("24fb");t=s(!1),t.push([e.i,".goods_list_add_edit .btn[data-v-7e974220]{background-color:#fff;padding-left:170px;margin-top:-20px;border-radius:10px;padding-bottom:42px}.goods_list_add_edit[data-v-7e974220] .el-tabs__content{transition:all .3s ease-in-out}",""]),e.exports=t},"2d14":function(e,t,a){var s=a("5ad3");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("4f06").default;i("4923e810",s,!0,{sourceMap:!1,shadowMode:!1})},"35b0":function(e,t,a){var s=a("8254");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("4f06").default;i("1fcec6e2",s,!0,{sourceMap:!1,shadowMode:!1})},"3ba2":function(e,t,a){"use strict";a.r(t);var s=a("d502"),i=a("9f4e");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);var r=a("f0c5"),o=Object(r["a"])(i["default"],s["b"],s["c"],!1,null,"43621327",null,!1,s["a"],void 0);t["default"]=o.exports},"42c9":function(e,t,a){"use strict";var s=a("35b0"),i=a.n(s);i.a},"4eb6":function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){}));var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container add_edit"},[a("el-form",{attrs:{"label-width":"150px"}},[a("div",[a("h3",{staticClass:"margin_b_20"},[e._v("SKU")]),a("div",[a("el-form-item",{attrs:{label:"开启SKU"}},[a("el-switch",{attrs:{"active-color":"#ff6a6c","inactive-color":"#dcdfe6"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.open_switch_sku.apply(void 0,arguments)}},model:{value:e.switch_sku,callback:function(t){e.switch_sku=t},expression:"switch_sku"}})],1),e.switch_sku?a("el-form-item",{attrs:{label:"编辑SKU"}},[a("div",[a("el-checkbox",{staticClass:"margin_r_10",on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.open_spec.apply(void 0,arguments)}},model:{value:e.checked_spec,callback:function(t){e.checked_spec=t},expression:"checked_spec"}}),a("el-input",{attrs:{placeholder:"规格"},model:{value:e.spec_s,callback:function(t){e.spec_s=t},expression:"spec_s"}})],1),a("div",{staticClass:"dflex margin_t_20"},[e._l(e.dynamicTags_spec,(function(t,s){return a("el-tag",{key:s,staticClass:"tag-new-tag",attrs:{type:"info",closable:e.checked_spec,"disable-transitions":!1},on:{close:function(a){arguments[0]=a=e.$handleEvent(a),e.handleClose_spec(t)}}},[e._v(e._s(t))])})),e.inputVisible_spec?a("el-input",{ref:"saveTagInput_spec",staticClass:"input-new-tag",on:{blur:function(t){arguments[0]=t=e.$handleEvent(t),e.handleInputConfirm_spec.apply(void 0,arguments)}},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;arguments[0]=t=e.$handleEvent(t),e.handleInputConfirm_spec.apply(void 0,arguments)}},model:{value:e.inputValue_spec,callback:function(t){e.inputValue_spec=t},expression:"inputValue_spec"}}):a("el-button",{staticClass:"button-new-tag",attrs:{disabled:!e.checked_spec,size:"small"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showInput_spec.apply(void 0,arguments)}}},[e._v("添加")])],2)]):e._e(),e.switch_sku?a("el-form-item",[a("el-table",{attrs:{data:e.tableSkuData,border:!0}},[a("el-table-column",{attrs:{label:"价格",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"sort-container",attrs:{type:"number"},model:{value:t.row.price,callback:function(a){e.$set(t.row,"price",e._n(a))},expression:"scope.row.price"}})]}}],null,!1,3850572181)}),a("el-table-column",{attrs:{label:"库存",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"sort-container",attrs:{type:"number"},model:{value:t.row.stock_num,callback:function(a){e.$set(t.row,"stock_num",e._n(a))},expression:"scope.row.stock_num"}})]}}],null,!1,3601427633)}),e.checked_spec?a("el-table-column",{attrs:{prop:"spec",label:e.spec_s,align:"center"}}):e._e()],1)],1):e._e()],1)])])],1)},i=[]},"58c3":function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){}));var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"goods_list_add_edit"},[a("el-tabs",{attrs:{"before-leave":e.onTab},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("el-tab-pane",{attrs:{label:"基本",name:"basic"}},[e.tab?a("basic",{ref:"basic"}):e._e()],1),a("el-tab-pane",{attrs:{label:"详情",name:"detail"}},[e.tab?a("detail",{ref:"detail",on:{detail:function(t){arguments[0]=t=e.$handleEvent(t),e.detail.apply(void 0,arguments)}}}):e._e()],1),a("el-tab-pane",{attrs:{label:"商品SKU",name:"sku"}},[e.tab?a("sku",{ref:"sku"}):e._e()],1),a("el-tab-pane",{attrs:{label:"分享设置",name:"shareSet"}},[e.tab?a("shareSet",{ref:"shareSet"}):e._e()],1),a("div",{staticClass:"btn"},[a("el-button",{staticClass:"confirm_btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submitForm.apply(void 0,arguments)}}},[e._v("确 定")]),a("el-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.returnPage.apply(void 0,arguments)}}},[e._v("返回列表")])],1)],1)],1)},i=[]},"5ad3":function(e,t,a){var s=a("24fb");t=s(!1),t.push([e.i,".tag-new-tag[data-v-252b6c28]{margin-left:24px}.button-new-tag[data-v-252b6c28],\n.input-new-tag[data-v-252b6c28]{margin-left:24px;height:32px;margin-top:0}.input-new-tag[data-v-252b6c28]{width:100px;line-height:32px}[data-v-252b6c28] .input-new-tag .el-input__inner{height:100%}.el-button--small[data-v-252b6c28]{border:1px solid #dcdfe6}",""]),e.exports=t},"6a61":function(e,t,a){"use strict";(function(e){a("7a82");var s=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("a434"),a("c740"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861");var i=s(a("9e67")),n={data:function(){return{imageValue:[],imageStyle:{height:"150px",width:"150px"},editor:null,editorContent:""}},props:["catchData"],methods:{submitData:function(e){return this.imageValue.length<1?(this.$message({message:"请选择主图",type:"warning"}),void this.$emit("detail")):this.editorContent?void("function"===typeof e&&e({content:this.editorContent,imgs:this.imageValue})):(this.$message({message:"请输入商品详情",type:"warning"}),void this.$emit("detail"))},getData:function(e){this.submitData(e)},setData:function(e){this.imageValue=e.goods.imgs,e.goods_detail&&e.goods_detail.desc_mobile&&(this.editor.txt.html(e.goods_detail.desc_mobile),this.editorContent=e.goods_detail.desc_mobile)},imgDelete:function(e){this.imageValue.splice(this.imageValue.findIndex((function(t){return t.url==e.url})),1)}},mounted:function(){var t=this;this.editor=new i.default(this.$refs.editorElem),this.editor.customConfig.onchange=function(e){t.editorContent=e},this.editor.customConfig.uploadImgMaxSize=2097152,this.editor.customConfig.uploadImgMaxLength=10,this.editor.customConfig.customAlert=function(e){alert("自定义提示："+e)},this.editor.customConfig.customUploadImg=function(t,a){for(var s=0;s<t.length;s++)e.uploadFile({filePath:window.URL.createObjectURL(t[s]),cloudPath:t[s].name,fail:function(e){},success:function(e){a(e.fileID)}})},this.editor.customConfig.menus=["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","code","undo","redo"],this.editor.create()}};t.default=n}).call(this,a("a9ff")["default"])},8254:function(e,t,a){var s=a("24fb");t=s(!1),t.push([e.i,'uni-input[type="file"][data-v-252b6c28]{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;cursor:pointer;opacity:0;z-index:99}',""]),e.exports=t},8474:function(e,t,a){"use strict";a.r(t);var s=a("1825"),i=a("ace5");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);var r=a("f0c5"),o=Object(r["a"])(i["default"],s["b"],s["c"],!1,null,"031141c4",null,!1,s["a"],void 0);t["default"]=o.exports},"8b18":function(e,t,a){"use strict";a.r(t);var s=a("4eb6"),i=a("a681");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);a("42c9"),a("1cab");var r=a("f0c5"),o=Object(r["a"])(i["default"],s["b"],s["c"],!1,null,"252b6c28",null,!1,s["a"],void 0);t["default"]=o.exports},9645:function(e,t,a){"use strict";a.r(t);var s=a("6a61"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a},"9f4e":function(e,t,a){"use strict";a.r(t);var s=a("e971"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a},a681:function(e,t,a){"use strict";a.r(t);var s=a("0f91"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a},ace5:function(e,t,a){"use strict";a.r(t);var s=a("c655"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a},bc73:function(e,t,a){"use strict";a.r(t);var s=a("efb5"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a},c655:function(e,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={data:function(){return{form:{share_title:"",share_img:"",share_desc:""},imageValue:null,imageStyle:{height:"150px",width:"150px"}}},methods:{submitData:function(e){var t=this;this.$refs["ruleForm"].validate((function(a){a&&"function"===typeof e&&e(t.form)}))},getData:function(e){this.submitData(e)},setData:function(e){this.form=e,this.imageValue={},this.imageValue.url=this.form.share_img},imgUpload:function(e){this.form.share_img=e.tempFilePaths[0]}}}},d271:function(e,t,a){"use strict";var s=a("fd17"),i=a.n(s);i.a},d502:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){}));var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"150px"}},[a("div",{staticClass:"container add_edit"},[a("h3",{staticClass:"margin_b_20"},[e._v("基本信息")]),a("div",[a("el-form-item",{ref:"cid",attrs:{label:"平台分类",prop:"cid"}},[a("el-cascader",{ref:"cascaderObj",staticClass:"sele",attrs:{options:e.categoryOptions,props:{checkStrictly:!0,emitPath:!1,value:"_id",label:"name"}},model:{value:e.form.cid,callback:function(t){e.$set(e.form,"cid",t)},expression:"form.cid"}})],1),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{attrs:{type:"number",min:"0"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",e._n(t))},expression:"form.sort"}}),a("div",{staticClass:"remark_txt"},[e._v("数字越小，排名越靠前")])],1),a("el-form-item",{ref:"name",attrs:{label:"商品名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"推广词"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3},placeholder:"请输入推广词"},model:{value:e.form.name_pw,callback:function(t){e.$set(e.form,"name_pw",t)},expression:"form.name_pw"}})],1)],1)]),a("div",{staticClass:"container add_edit"},[a("h3",{staticClass:"margin_b_20"},[e._v("商品信息")]),a("div",[a("el-form-item",{attrs:{label:"限时精选"}},[a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.form.limited,callback:function(t){e.$set(e.form,"limited",e._n(t))},expression:"form.limited"}},[e._v("显示")]),a("div",{staticClass:"remark_txt"},[e._v("此分类将决定商品信息显示在限时精选分类下")])],1),a("el-form-item",{attrs:{label:"热门推荐"}},[a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.form.hot,callback:function(t){e.$set(e.form,"hot",e._n(t))},expression:"form.hot"}},[e._v("显示")]),a("div",{staticClass:"remark_txt"},[e._v("此分类将决定商品信息显示在热门推荐分类下")])],1),a("el-form-item",{attrs:{label:"商品标签"}},[a("el-checkbox-group",{model:{value:e.goodsDatas,callback:function(t){e.goodsDatas=t},expression:"goodsDatas"}},e._l(e.goodsTags,(function(e,t){return a("el-checkbox",{key:t,attrs:{label:e.name}})})),1),a("div",{staticClass:"remark_txt"},[e._v("此选项表示商品所属商品")])],1),a("el-form-item",{attrs:{label:"服务标签"}},[a("el-checkbox-group",{model:{value:e.serveDatas,callback:function(t){e.serveDatas=t},expression:"serveDatas"}},e._l(e.serveTags,(function(e,t){return a("el-checkbox",{key:t,attrs:{label:e.name}})})),1),a("div",{staticClass:"remark_txt"},[e._v("此选项表示商品对应的服务项")])],1),a("el-form-item",{ref:"price",attrs:{label:"商城价",prop:"price"}},[a("el-input",{attrs:{type:"number",min:"0"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",e._n(t))},expression:"form.price"}}),a("div",{staticClass:"remark_txt"},[e._v("单位为分，"+e._s(e.form.price)+" 分 = "+e._s(e.form.price/100)+" 元")])],1),a("el-form-item",{ref:"market_price",attrs:{label:"市场价",prop:"market_price"}},[a("el-input",{attrs:{type:"number",min:"0"},model:{value:e.form.market_price,callback:function(t){e.$set(e.form,"market_price",e._n(t))},expression:"form.market_price"}}),a("div",{staticClass:"remark_txt"},[e._v("单位为分，"+e._s(e.form.market_price)+" 分 = "+e._s(e.form.market_price/100)+" 元")])],1),a("el-form-item",{ref:"limit",attrs:{label:"限购量",prop:"limit"}},[a("el-input",{attrs:{type:"number",min:"0"},model:{value:e.form.limit,callback:function(t){e.$set(e.form,"limit",e._n(t))},expression:"form.limit"}}),a("div",{staticClass:"remark_txt"},[e._v("0为不限购")])],1),a("el-form-item",{ref:"stock_num",attrs:{label:"库存",prop:"stock_num"}},[a("el-input",{attrs:{type:"number",min:"0"},model:{value:e.form.stock_num,callback:function(t){e.$set(e.form,"stock_num",e._n(t))},expression:"form.stock_num"}})],1),a("el-form-item",{attrs:{label:"已出售数"}},[a("el-input",{attrs:{type:"number",min:"0"},model:{value:e.form.sale_cnt,callback:function(t){e.$set(e.form,"sale_cnt",e._n(t))},expression:"form.sale_cnt"}}),a("el-checkbox",{staticClass:"w100",attrs:{"true-label":1,"false-label":0},model:{value:e.form.sale,callback:function(t){e.$set(e.form,"sale",e._n(t))},expression:"form.sale"}},[e._v("显示")]),a("div",{staticClass:"remark_txt"},[e._v("勾选此选项将作虚拟销量")])],1),a("el-form-item",{attrs:{label:"已访问数"}},[a("el-input",{attrs:{type:"number",min:"0"},model:{value:e.form.visit_cnt,callback:function(t){e.$set(e.form,"visit_cnt",e._n(t))},expression:"form.visit_cnt"}}),a("el-checkbox",{staticClass:"w100",attrs:{"true-label":1,"false-label":0},model:{value:e.form.visit,callback:function(t){e.$set(e.form,"visit",e._n(t))},expression:"form.visit"}},[e._v("显示")]),a("div",{staticClass:"remark_txt"},[e._v("勾选此选项将作访问销量")])],1),a("el-form-item",{attrs:{label:"已收藏数"}},[a("el-input",{attrs:{type:"number",min:"0"},model:{value:e.form.collect_cnt,callback:function(t){e.$set(e.form,"collect_cnt",e._n(t))},expression:"form.collect_cnt"}}),a("el-checkbox",{staticClass:"w100",attrs:{"true-label":1,"false-label":0},model:{value:e.form.collect,callback:function(t){e.$set(e.form,"collect",e._n(t))},expression:"form.collect"}},[e._v("显示")]),a("div",{staticClass:"remark_txt"},[e._v("勾选此选项将作收藏销量")])],1),a("el-form-item",{attrs:{label:"已分享数"}},[a("el-input",{attrs:{type:"number",min:"0"},model:{value:e.form.share_cnt,callback:function(t){e.$set(e.form,"share_cnt",e._n(t))},expression:"form.share_cnt"}}),a("el-checkbox",{staticClass:"w100",attrs:{"true-label":1,"false-label":0},model:{value:e.form.share,callback:function(t){e.$set(e.form,"share",e._n(t))},expression:"form.share"}},[e._v("显示")]),a("div",{staticClass:"remark_txt"},[e._v("勾选此选项将作分享销量")])],1),a("el-form-item",{ref:"sold_out_time",attrs:{label:"下架时间",prop:"sold_out_time"}},[a("el-date-picker",{staticClass:"time",attrs:{type:"datetime",placeholder:"下架时间",align:"center",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions},model:{value:e.form.sold_out_time,callback:function(t){e.$set(e.form,"sold_out_time",t)},expression:"form.sold_out_time"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-radio-group",{model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},[a("el-radio",{attrs:{label:"待审核"}},[e._v("待审核")]),a("el-radio",{attrs:{label:"销售中"}},[e._v("销售中")]),a("el-radio",{attrs:{label:"已下架"}},[e._v("已下架")])],1)],1)],1)])])],1)},i=[]},e3cf:function(e,t,a){"use strict";a.r(t);var s=a("22335"),i=a("9645");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);var r=a("f0c5"),o=Object(r["a"])(i["default"],s["b"],s["c"],!1,null,"54dae55a",null,!1,s["a"],void 0);t["default"]=o.exports},e971:function(e,t,a){"use strict";a("7a82");var s=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a("2909"));a("d3b7"),a("159b"),a("4de4"),a("99af"),a("7db0");var n={data:function(){return{categoryOptions:[],goodsDatas:[],serveDatas:[],goodsTags:[],serveTags:[],form:{cid:"",cids:[],sort:0,name:"",name_pw:"",limited:0,hot:0,tags:[],price:0,market_price:0,limit:0,stock_num:0,sale_cnt:0,sale:0,visit_cnt:0,visit:0,collect_cnt:0,collect:0,share_cnt:0,share:0,sold_out_time:"",state:"待审核"},pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()}},rules:{cid:[{required:!0,message:"请选择平台分类",trigger:"change"}],name:[{required:!0,message:"请输入商品名称",trigger:"change"}],price:[{required:!0,message:"请输入商城价，必须大于0",trigger:"change"}],market_price:[{required:!0,message:"请输入市场价，必须大于0",trigger:"change"}],stock_num:[{required:!0,message:"请输入库存，必须大于0",trigger:"change"}],limit:[{required:!0,message:"请输入库存，必须大于0",trigger:"change"}],sold_out_time:[{required:!0,message:"请选择下架时间",trigger:"change"}]}}},methods:{setChildren:function(e){var t=this;e.forEach((function(e){e.children&&e.children.length<=0?e.children=null:t.setChildren(e.children)}))},setBaseData:function(e){this.setChildren(e[0].datas),this.categoryOptions=e[0].datas,this.goodsTags=e[1].datas.filter((function(e){return"商品"==e.type})),this.serveTags=e[1].datas.filter((function(e){return"服务"==e.type}))},submitData:function(e){var t=this;this.$refs["ruleForm"].validate((function(a,s){if(t.$api.set_unvalidated_form_focus(t,s),!a)return"function"===typeof e&&e(t.form,!1),!1;t.form.tags=[].concat((0,i.default)(t.goodsDatas),(0,i.default)(t.serveDatas));var n=t.$refs.cascaderObj.getCheckedNodes();t.form.cids=n[0].path,"function"===typeof e&&e(t.form,!0)}))},getData:function(e){this.submitData(e)},setData:function(e){var t=this;for(var a in e.tags=e.tags||[],e.cids=e.cids||[],this.goodsDatas=e.tags.filter((function(e){return t.goodsTags.find((function(t){return t.name==e}))})),this.serveDatas=e.tags.filter((function(e){return t.serveTags.find((function(t){return t.name==e}))})),this.form.cid=e.cid,this.form)this.form.hasOwnProperty(a)&&"cid"!=a&&(this.form[a]=e[a])}}};t.default=n},efb5:function(e,t,a){"use strict";a("7a82");var s=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("d3b7"),a("3ca3"),a("ddb0"),a("ac1f"),a("00b4"),a("e25e"),a("acd8"),a("5319"),a("14d9");var i=s(a("c7eb")),n=s(a("1da1")),r=s(a("f554")),o=s(a("3ba2")),c=s(a("e3cf")),l=s(a("8b18")),u=s(a("8474")),d={components:{basic:o.default,detail:c.default,sku:l.default,shareSet:u.default},data:function(){return{dataId:"",tab:"",search_req:{page:1,rows:500}}},methods:{loadData:function(){var e=this;return(0,n.default)((0,i.default)().mark((function t(){var a,s,n;return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$db["usemall-goods-category"].totree({orderby:"sort asc",startWith:'pid == ""'}),s=e.$db["usemall-goods-tag"].tolist({page:1,rows:500}),t.next=4,Promise.all([a,s]);case 4:if(n=t.sent,e.$refs.basic.setBaseData(n),e.dataId){t.next=8;break}return t.abrupt("return");case 8:e.$func.useadmin.call("goods/detail",{goods_id:e.dataId}).then((function(t){200==t.code&&(e.$refs.basic.setData(t.datas.goods),e.$refs.detail.setData(t.datas),e.$refs.shareSet.setData(t.datas.goods),e.$refs.sku.setData(t.datas))}));case 9:case"end":return t.stop()}}),t)})))()},detail:function(){this.tab="detail"},onTab:function(){var e=this;if(this.tab&&this.$refs.basic){var t=!0;return this.$refs.basic.getData((function(a,s){t=s,(t&&a.price<=0||""==a.price)&&(e.$message({message:"商城价必须大于0",type:"success"}),t=!1),t&&e.$refs.sku.setGoods(a)})),t}},submitForm:function(){var e=this,t={},a={},s=[];this.$refs.basic.getData((function(i){t=i,e.$refs.shareSet.getData((function(e){t.share_title=e.share_title,t.share_img=e.share_img,t.share_desc=e.share_desc})),e.$refs.sku.getData((function(e,a){s=e,t.skus=a})),e.$refs.detail.getData((function(i){for(var n in a.desc_mobile=i.content,t.img=i.imgs[0].url,t.imgs=i.imgs,t)t.hasOwnProperty(n)&&"string"===typeof t[n]&&(/^[0-9]*$/.test(t[n])?t[n]=parseInt(t[n]):/^[0-9]+(.[0-9]{1,3})?$/.test(t[n])&&(t[n]=parseFloat(t[n])));a.desc_mobile=a.desc_mobile.replace(/inline-/gi,""),e.dataId?e.$func.useadmin.call("goods/edit",{goods_id:e.dataId,goods:t,detail:a,skus:s}).then((function(t){200==t.code&&(e.$message({message:t.datas.msg,type:"success"}),e.returnPage())})):e.$func.useadmin.call("goods/add",{goods:t,detail:a,skus:s}).then((function(t){200==t.code&&(e.$message({message:t.datas.msg,type:"success"}),e.returnPage())}))}))}))},returnPage:function(){r.default.$emit("tab-close"),this.$router.push("/pages/goods/list/goods_list")}},created:function(){this.dataId=this.$route.query.id||"",this.loadData()},mounted:function(){this.tab="basic";var e=document.querySelector(".el-tabs__content"),t=this.$api.offset(e);e.style.position="fixed",e.style.top=t.t+29+"px",e.style.left=t.l+"px",e.style.bottom="16px",e.style.right="16px",e.style.overflow="auto",e.style.overflow="overlay",r.default.$on("fold",(function(t){e.style.left=t?"80px":"calc(16px + var(--window-left))"}))}};t.default=d},fd17:function(e,t,a){var s=a("2a06");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("4f06").default;i("0c8ff031",s,!0,{sourceMap:!1,shadowMode:!1})}}]);