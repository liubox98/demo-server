(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-search-page","pages-shop-search-hot","pages-shop-search-list"],{"0b8b":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{on:{"tab-click":function(e){arguments[0]=e=t.$handleEvent(e),t.cutTabs.apply(void 0,arguments)}},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("el-tab-pane",{attrs:{label:"搜索列表",name:"list"}},["list"==t.tab?a("list"):t._e()],1),a("el-tab-pane",{attrs:{label:"热门搜索",name:"hot"}},["hot"==t.tab?a("hot"):t._e()],1)],1)],1)},i=[]},"0c90":function(t,e,a){"use strict";a.r(e);var n=a("5ea7"),i=a.n(n);for(var l in n)["default"].indexOf(l)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(l);e["default"]=i.a},"29b1":function(t,e,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("4d63"),a("c607"),a("ac1f"),a("2c3e"),a("25f0"),a("d3b7"),a("159b"),a("d81d"),a("4e82");var i=n(a("c7eb")),l=n(a("1da1")),r="usemall-search-hot",o={data:function(){return{req:{page:1,rows:10,orderby:"sort asc",keyword:""},tblHeight:0,tableDatas:[],tableTotal:0,selectDatas:[]}},methods:{loadData:function(){var t=this;return(0,l.default)((0,i.default)().mark((function e(){return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$db[r].whereif(t.req.keyword,{keyword:new RegExp(t.req.keyword)}).totable(t.req).then((function(e){200==e.code&&(e.datas.rows.forEach((function(t,e){t.create_time=new Date(t.create_time).format()})),t.tableDatas=e.datas.rows,t.tableTotal=e.datas.total)}));case 2:case"end":return e.stop()}}),e)})))()},toAdd:function(){var t=this;uni.navigateTo({url:"/pages/shop/search/hot_add_edit?tab=添加热门",events:{refreshData:function(){t.loadData()}}})},toEdit:function(t){var e=this;uni.navigateTo({url:"/pages/shop/search/hot_add_edit?id=".concat(t,"&tab=编辑热门"),events:{refreshData:function(){e.loadData()}}})},remove:function(t){var e=this;this.$confirm("此操作将永久删除该数据！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$db[r].remove(t).then((function(t){200==t.code&&e.loadData()}))}))},selectionChange:function(t){this.selectDatas=t},removes:function(){var t=this;if(this.selectDatas.length<=0)this.$message("请勾选需要删除的数据");else{var e=this.selectDatas.map((function(t){return t._id}));this.$confirm("此操作将永久删除勾选数据！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$db[r].where({_id:t.$db.$cmd.in(e)}).remove().then((function(e){200==e.code&&t.loadData()}))}))}},sortChange:function(t){var e=this;""!=t.sort&&this.$db[r].update(t._id,{sort:t.sort}).then((function(t){200==t.code&&e.loadData()}))},sizeChange:function(t){this.req.rows=t,this.loadData()},currentChange:function(t){this.req.page=t,this.loadData()}},created:function(){this.loadData()}};e.default=o},"382e":function(t,e,a){"use strict";a.r(e);var n=a("383b"),i=a("39e8");for(var l in i)["default"].indexOf(l)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(l);var r=a("f0c5"),o=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"6a144e02",null,!1,n["a"],void 0);e["default"]=o.exports},"383b":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return l})),a.d(e,"a",(function(){return n}));var n={useTable:a("4c35").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("use-table",{ref:"tbl"}),a("div",{staticClass:"container padding_b_0"},[a("div",{staticClass:"dflex_wrap"},[a("div",{staticClass:"dflex_vertical_c margin_r_40 margin_b_20"},[a("div",{staticClass:"search_name"},[t._v("关键字：")]),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.loadData.apply(void 0,arguments)}},model:{value:t.req.keyword,callback:function(e){t.$set(t.req,"keyword",e)},expression:"req.keyword"}})],1),a("el-button",{staticClass:"search_btn margin_b_20 margin_r_40",attrs:{size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loadData.apply(void 0,arguments)}}},[t._v("搜索")])],1)]),a("div",{staticClass:"container use-table"},[a("el-table",{attrs:{height:t.tblHeight,data:t.tableDatas,"highlight-current-row":!0}},[a("el-table-column",{attrs:{property:"_id",label:"用户ID",align:"center"}}),a("el-table-column",{attrs:{property:"keyword",label:"关键字",align:"center"}}),a("el-table-column",{attrs:{property:"search_cnt",label:"搜索次数",align:"center"}}),a("el-table-column",{attrs:{property:"create_time",label:"创建时间",align:"center"}})],1),a("el-pagination",{attrs:{"current-page":t.req.page,"page-sizes":[10,20,30,50,100],"page-size":t.req.rows,layout:"total, sizes, prev, pager, next, jumper",total:t.tableTotal},on:{"size-change":function(e){arguments[0]=e=t.$handleEvent(e),t.sizeChange.apply(void 0,arguments)},"current-change":function(e){arguments[0]=e=t.$handleEvent(e),t.currentChange.apply(void 0,arguments)}}})],1)],1)},l=[]},"39e8":function(t,e,a){"use strict";a.r(e);var n=a("68ae"),i=a.n(n);for(var l in n)["default"].indexOf(l)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(l);e["default"]=i.a},"3c47":function(t,e,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("2909"));a("a9e3"),a("d3b7"),a("159b"),a("caad"),a("2532");var l=n(a("f554")),r={props:{navHeight:{type:Number,default:0},bottom:{type:Number,default:15},right:{type:Number,default:15},top:{type:Number,default:0}},data:function(){return{height:0,tblHeight:0,body:null,containers:[],tableObj:null,tableButtonHeight:0,tablePaginationHeight:0}},mounted:function(){var t=this;this.body=document.getElementsByTagName("uni-page-body")[0],this.__height=this.body.clientHeight,this.containers=this.$refs.useTable.parentElement.querySelectorAll(".container"),this.tableStyle(),this.tableChange(),window.onresize=function(){t.tableChange()}},methods:{tableStyle:function(){var t=this;this.tableObj&&this.tableObj.ele||(this.containers.forEach((function(e){(0,i.default)(e.classList).includes("use-table")?t.tableObj={offset:t.$api.offset(e),ele:e}:t.__height-=e.clientHeight-15})),this.tableObj.ele.style.position="fixed",this.tableObj.ele.style.top=this.tableObj.offset.t+"px",this.tableObj.ele.style.left=this.tableObj.offset.l+"px",this.tableObj.ele.style.bottom=this.bottom+"px",this.tableObj.ele.style.right=this.right+"px",this.tableObj.ele.childNodes.length&&this.tableObj.ele.childNodes.forEach((function(e){(0,i.default)(e.classList).includes("el-pagination")?t.tablePaginationHeight=35:(0,i.default)(e.classList).includes("el-table")||(t.tableButtonHeight=55)})))},tableChange:function(){this.tblHeight=this.tableObj.ele.clientHeight-40-this.tableButtonHeight-this.tablePaginationHeight,this.tableObj.ele.querySelector(".el-table").style.height=this.tblHeight+"px"}},created:function(){var t=this;l.default.$on("fold",(function(e){t.tableObj.ele.style.left=e?t.tableObj.offset.l-116+"px":t.tableObj.offset.l+"px"}))}};e.default=r},"4c35":function(t,e,a){"use strict";a.r(e);var n=a("ba4c"),i=a("bc45");for(var l in i)["default"].indexOf(l)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(l);var r=a("f0c5"),o=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"577ef3ec",null,!1,n["a"],void 0);e["default"]=o.exports},"5ea7":function(t,e,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("382e")),l=n(a("f9dc")),r={components:{list:i.default,hot:l.default},data:function(){return{tab:""}},methods:{cutTabs:function(t){uni.setStorage({key:"search_page_tab",data:t.name})}},mounted:function(){this.tab=uni.getStorageSync("search_page_tab")||"list"}};e.default=r},"68ae":function(t,e,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("4d63"),a("c607"),a("ac1f"),a("2c3e"),a("25f0"),a("d3b7"),a("159b");var i=n(a("c7eb")),l=n(a("1da1")),r={data:function(){return{req:{page:1,rows:10,orderby:"sort asc",keyword:""},tblHeight:0,tableDatas:[],tableTotal:0}},methods:{loadData:function(){var t=this;return(0,l.default)((0,i.default)().mark((function e(){return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$db["usemall-search-history"].whereif(t.req.keyword,{keyword:new RegExp(t.req.keyword)}).totable(t.req).then((function(e){200==e.code&&(e.datas.rows.forEach((function(t,e){t.create_time=new Date(t.create_time).format()})),t.tableDatas=e.datas.rows,t.tableTotal=e.datas.total)}));case 2:case"end":return e.stop()}}),e)})))()},sizeChange:function(t){this.req.rows=t,this.loadData()},currentChange:function(t){this.req.page=t,this.loadData()}},created:function(){this.loadData()},updated:function(){this.tblHeight||(this.tblHeight=this.$refs.tbl.tblHeight)}};e.default=r},8831:function(t,e,a){"use strict";a.r(e);var n=a("29b1"),i=a.n(n);for(var l in n)["default"].indexOf(l)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(l);e["default"]=i.a},ba4c:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"useTable"})},i=[]},bac4:function(t,e,a){"use strict";a.r(e);var n=a("0b8b"),i=a("0c90");for(var l in i)["default"].indexOf(l)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(l);var r=a("f0c5"),o=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"4048967c",null,!1,n["a"],void 0);e["default"]=o.exports},bc45:function(t,e,a){"use strict";a.r(e);var n=a("3c47"),i=a.n(n);for(var l in n)["default"].indexOf(l)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(l);e["default"]=i.a},e90f:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return l})),a.d(e,"a",(function(){return n}));var n={useTable:a("4c35").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("use-table",{ref:"tbl"}),a("div",{staticClass:"container padding_b_0"},[a("div",{staticClass:"dflex_wrap"},[a("div",{staticClass:"dflex_vertical_c margin_r_40 margin_b_20"},[a("div",{staticClass:"search_name"},[t._v("关键字：")]),a("el-input",{staticClass:"search_input",attrs:{placeholder:"请输入"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.loadData.apply(void 0,arguments)}},nativeOn:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;arguments[0]=e=t.$handleEvent(e),t.loadData.apply(void 0,arguments)}},model:{value:t.req.keyword,callback:function(e){t.$set(t.req,"keyword",e)},expression:"req.keyword"}})],1),a("el-button",{staticClass:"search_btn margin_b_20 margin_r_40",attrs:{size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loadData.apply(void 0,arguments)}}},[t._v("搜索")])],1)]),a("div",{staticClass:"container use-table"},[a("div",{staticClass:"dflex_sb margin_b_15"},[a("div",[a("el-button",{staticClass:"batch_btn padding0",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.removes.apply(void 0,arguments)}}},[t._v("删除")])],1),a("el-button",{staticClass:"add_btn pos_r padding0",attrs:{icon:"iconfont iconxinzeng"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toAdd.apply(void 0,arguments)}}},[t._v("新增")])],1),a("el-table",{attrs:{data:t.tableDatas,"highlight-current-row":!0},on:{"selection-change":function(e){arguments[0]=e=t.$handleEvent(e),t.selectionChange.apply(void 0,arguments)}}},[a("el-table-column",{attrs:{type:"selection"}}),a("el-table-column",{attrs:{label:"排序",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{size:"small",min:1},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.sortChange(e.row)},blur:function(a){arguments[0]=a=t.$handleEvent(a),t.sortChange(e.row)}},model:{value:e.row.sort,callback:function(a){t.$set(e.row,"sort",a)},expression:"scope.row.sort"}})]}}])}),a("el-table-column",{attrs:{property:"_id",label:"用户ID",align:"center"}}),a("el-table-column",{attrs:{property:"keyword",label:"关键字",align:"center"}}),a("el-table-column",{attrs:{property:"search_cnt",label:"搜索次数",align:"center"}}),a("el-table-column",{attrs:{property:"create_time",label:"创建时间",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{content:"编辑",placement:"top","hide-after":1e3,enterable:!1,effect:"light"}},[a("el-button",{staticClass:"bbb",attrs:{type:"text",icon:"iconfont iconbianji"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.toEdit(e.row._id)}}})],1),a("el-tooltip",{attrs:{content:"删除",placement:"top","hide-after":1e3,enterable:!1,effect:"light"}},[a("el-button",{staticClass:"bbb",attrs:{type:"text",icon:"iconfont iconshanchu"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.remove(e.row._id)}}})],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":t.req.page,"page-sizes":[10,20,30,50,100],"page-size":t.req.rows,layout:"total, sizes, prev, pager, next, jumper",total:t.tableTotal},on:{"size-change":function(e){arguments[0]=e=t.$handleEvent(e),t.sizeChange.apply(void 0,arguments)},"current-change":function(e){arguments[0]=e=t.$handleEvent(e),t.currentChange.apply(void 0,arguments)}}})],1)],1)},l=[]},f9dc:function(t,e,a){"use strict";a.r(e);var n=a("e90f"),i=a("8831");for(var l in i)["default"].indexOf(l)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(l);var r=a("f0c5"),o=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"b695d04c",null,!1,n["a"],void 0);e["default"]=o.exports}}]);